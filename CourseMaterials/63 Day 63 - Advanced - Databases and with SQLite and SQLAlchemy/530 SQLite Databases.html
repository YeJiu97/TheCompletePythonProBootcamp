<html><head><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.min.css"></head><body><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1 ui image"><p class="lead"><p>First, let's create a database. The most used database in the world is SQLite. It's so popular that it's included by default in all Python installations, so if you're creating a Python project, you've already got it installed. We're going to create an SQLite database to store our book data.</p><p>1. Create a new project and inside the main.py file import the <code>sqlite3</code> module. </p><pre class="prettyprint linenums">import sqlite3</pre><p>2. Now create a connection to a new database (if the database does not exist then it will be created).</p><pre class="prettyprint linenums">db = sqlite3.connect("books-collection.db")</pre><p>3. Run main.py and you should see a new file appear in PyCharm called <strong>books-collection.db</strong></p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-10-10-dbfb66cc51b0cfec4a716e04980ccb3c.png"></figure><p>NOTE: Don't try to open the .db file in PyCharm, it won't work, I'll show you how to download the software to open these files a little later.</p><p>4. Next we need to create a <strong>cursor</strong> which will control our database. </p><pre class="prettyprint linenums">cursor = db.cursor()</pre><p>So a cursor is also known as the mouse or pointer. If we were working in Excel or Google Sheet, we would be using the cursor to add rows of data or edit/delete data, we also need a cursor to modify our SQLite database.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-06-06-d7cc560a797ad5f9b1840f74f419cc37.png"></figure><h4>Creating Tables in our Database</h4><p>Coming back to the Excel analogy, a single Excel file can contain many tables (sheets), each tab is a different table. </p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-06-49-4cd308aa9604a2459e7bae69db41696f.png"></figure><p>Similarly, our database can contain many tables. </p><p>5. Let's create one. Add this code below all the previous lines.</p><p><code>cursor.execute("CREATE TABLE books (id INTEGER PRIMARY KEY, title varchar(250) NOT NULL UNIQUE, author varchar(250) NOT NULL, rating FLOAT NOT NULL)")</code> </p><p>Let's break this down.</p><p><code>cursor</code> - We created this in step 4 and this is the mouse pointer in our database that is going to do all the work.</p><p><code>.execute()</code> - This method will tell the cursor to execute an action. All actions in SQLite databases are expressed as SQL&nbsp;(Structured Query Language) commands. These are almost like English sentences with keywords written in ALL-CAPS. There are <a href="https://www.codecademy.com/articles/sql-commands" rel="noopener noreferrer" target="_blank">quite a few SQL commands</a>. But don't worry, you don't have to memorise them.</p><p><code>CREATE TABLE</code> -&nbsp; This will create a new table in the database. The name of the table comes after this keyword.</p><p>Docs: <a href="https://www.w3schools.com/sql/sql_ref_create_table.asp" rel="noopener noreferrer" target="_blank">https://www.w3schools.com/sql/sql_ref_create_table.asp</a></p><p><code>books</code> -&nbsp; This is the name that we've given the new table we're creating.</p><p><code>()</code> -&nbsp; The parts that come inside the parenthesis after CREATE&nbsp;TABLE&nbsp;books ( ) are going to be the fields in this table. Or you can imagine it as the Column headings in an Excel sheet.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-07-02-8c7636816809afb33257c09104c60666.jpg"></figure><p><code>id INTEGER PRIMARY KEY</code> -&nbsp; This is the first field, it's a field called "<code>id</code>" which is of data type <code>INTEGER</code> and it will be the <code>PRIMARY KEY</code>&nbsp;for this table. The primary key is the one piece of data that will uniquely identify this record in the table. e.g. The primary key of humans might be their passport number because no two people in the same country has the same passport number.</p><p><code>title varchar(250) NOT NULL UNIQUE</code> -&nbsp; This is the second field, it's called "<code>title</code>" and it accepts a variable-length string composed of characters. The 250 in brackets is the maximum length of the text. <code>NOT NULL</code>&nbsp;means it must have a value and cannot be left empty. <code>UNIQUE</code> means no two records in this table can have the same title. </p><p><code>author varchar(250) NOT NULL</code> -&nbsp; A field that accepts variable-length Strings up to 250 characters called <code>author</code> that cannot be left empty.</p><p><code>rating FLOAT NOT NULL</code> -&nbsp; A field that accepts FLOAT data type numbers, cannot be empty and the field is called <code>rating</code>.</p><p><br></p><p>6. Run the code from step 5 and there will be no noticeable changes. In order to view our database we need to download some specialised software. </p><p>Head over to the link below and download DB&nbsp;Browser for your operating system. (If you are on Windows go for the Standard Installer).</p><p><a href="https://sqlitebrowser.org/dl/" rel="noopener noreferrer" target="_blank">https://sqlitebrowser.org/dl/</a></p><p>7. Once you've downloaded and installed DB Browser, open it and click on "Open Database".</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-07-37-bd788a59006f42b661dd8842da1b04b6.png"></figure><p>8. Navigate to your project location (it should in a folder called PyCharm Projects) and open the books-collection.db</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-07-59-5ca5b438d54f7066d6bd5ffe366640a7.png"></figure><p>Now you should see a table called books that contains 4 fields:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-10-32-15b1d88e656944aa341321b675bcdef4.png"></figure><p>This is our database. </p><p>9. To add data to our table we can head back to main.py and write the following code:</p><pre class="prettyprint linenums">cursor.execute("INSERT INTO books VALUES(1, 'Harry Potter', 'J. K. Rowling', '9.3')")<br>db.commit()</pre><p>This will create a new entry in our books table for the Harry Potter book and commit the changes to our database.</p><p>10. Now comment out the previous line of code where you are created the table called books. Otherwise, you'll get <code>sqlite3.OperationalError: table books already exists</code>. </p><p>11. Then close down the database in DB&nbsp;Browser by clicking Close Database. Otherwise, you'll get a warning about <code>database locked</code> when you work with the database in PyCharm.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-10-46-1f7da428fc59e8d2f6eda90be3e19907.png"></figure><p>12. Now run the code in main.py and re-open the database in DB&nbsp;Browser to see the updated books table. it should look like this:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-09_16-11-24-7a7fecdf28d9cd5dd5bf0376488ca6eb.png"></figure><p>SQL queries are very sensitive to typos. If instead of writing:</p><pre class="prettyprint linenums">cursor.execute("INSERT INTO books VALUES(1, 'Harry Potter', 'J. K. Rowling', '9.3')")<br>db.commit()</pre><p>You wrote:</p><pre class="prettyprint linenums">cursor.execute("INSERT INTO books VALUE(1, 'Harry Potter', 'J. K. Rowling', '9.3')")<br>db.commit()</pre><p>Then it won't work at all (can you even spot the difference in the code?)</p><p>Luckily, there are much better ways of working with SQLite in Python projects, we can use a tool called SQLAlchemy to write Python code instead of all these error-prone SQL commands. That's what we'll do in the next lesson!</p></p></div></div></div></body></html>